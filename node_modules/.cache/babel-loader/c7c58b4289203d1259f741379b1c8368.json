{"ast":null,"code":"import _objectSpread from\"/Users/atul/Desktop/movie-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/atul/Desktop/movie-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/atul/Desktop/movie-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/atul/Desktop/movie-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/atul/Desktop/movie-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/atul/Desktop/movie-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{API_URL,API_KEY}from\"../../config\";import Navigation from\"../elements/Navigation/Navigation\";import MovieInfo from\"../elements/MovieInfo/MovieInfo\";import MovieInfoBar from\"../elements/MovieInfoBar/MovieInfoBar\";import FourColdGrid from\"../elements/FourColGrid/FourColGrid\";import Actor from\"../elements/Actor/Actor\";import Spinner from\"../elements/Spinner/Spinner\";import\"./Movie.css\";var Movie=/*#__PURE__*/function(_Component){_inherits(Movie,_Component);function Movie(){var _getPrototypeOf2;var _this;_classCallCheck(this,Movie);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Movie)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={movie:null,actors:null,directors:[],loading:false};_this.fetchItems=function(endpoint){fetch(endpoint).then(function(res){return res.json();}).then(function(res){console.log(res);if(res.status_code){_this.setState({loading:false});}else{_this.setState({movie:res},function(){// fetch actors in setState callback function\nvar endpoint=\"\".concat(API_URL,\"movie/\").concat(_this.props.match.params.movieId,\"/credits?api_key=\").concat(API_KEY);fetch(endpoint).then(function(res){return res.json();}).then(function(res){console.log(res);var directors=res.crew.filter(function(member){return member.job===\"Director\";});_this.setState({actors:res.cast,directors:directors,loading:false},function(){localStorage.setItem(\"\".concat(_this.props.match.params.movieId),JSON.stringify(_this.state));});});});}}).catch(function(err){return console.log(err);});};return _this;}_createClass(Movie,[{key:\"componentDidMount\",value:function componentDidMount(){if(localStorage.getItem(\"\".concat(this.props.match.params.movieId))){var state=JSON.parse(localStorage.getItem(\"\".concat(this.props.match.params.movieId)));this.setState(_objectSpread({},state));}else{this.setState({loading:true});// fetch movie\nvar endpoint=\"\".concat(API_URL,\"movie/\").concat(this.props.match.params.movieId,\"?api_key=\").concat(API_KEY,\"&language=en-US\");this.fetchItems(endpoint);}}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"rmdb-movie\"},this.state.movie?React.createElement(\"div\",null,React.createElement(Navigation,{movie:this.props.location.movieName}),React.createElement(MovieInfo,{movie:this.state.movie,directors:this.state.directors}),React.createElement(MovieInfoBar,{time:this.state.runtime,budget:this.state.movie.budget,revenue:this.state.movie.revenue})):null,this.state.actors?React.createElement(\"div\",{className:\"rmdb-movie-grid\"},React.createElement(FourColdGrid,{header:\"Actors\"},this.state.actors.map(function(element,i){return React.createElement(Actor,{key:i,actor:element});}))):null,!this.state.actors&&!this.state.loading?React.createElement(\"h1\",null,\"No Movie Found\"):null,this.state.loading?React.createElement(Spinner,null):null);}}]);return Movie;}(Component);export{Movie as default};","map":{"version":3,"sources":["/Users/atul/Desktop/movie-app/src/components/Movie/Movie.js"],"names":["React","Component","API_URL","API_KEY","Navigation","MovieInfo","MovieInfoBar","FourColdGrid","Actor","Spinner","Movie","state","movie","actors","directors","loading","fetchItems","endpoint","fetch","then","res","json","console","log","status_code","setState","props","match","params","movieId","crew","filter","member","job","cast","localStorage","setItem","JSON","stringify","catch","err","getItem","parse","location","movieName","runtime","budget","revenue","map","element","i"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { API_URL, API_KEY } from \"../../config\";\nimport Navigation from \"../elements/Navigation/Navigation\";\nimport MovieInfo from \"../elements/MovieInfo/MovieInfo\";\nimport MovieInfoBar from \"../elements/MovieInfoBar/MovieInfoBar\";\nimport FourColdGrid from \"../elements/FourColGrid/FourColGrid\";\nimport Actor from \"../elements/Actor/Actor\";\nimport Spinner from \"../elements/Spinner/Spinner\";\nimport \"./Movie.css\";\n\nexport default class Movie extends Component {\n  state = {\n    movie: null,\n    actors: null,\n    directors: [],\n    loading: false\n  };\n\n  componentDidMount() {\n    if (localStorage.getItem(`${this.props.match.params.movieId}`)) {\n      const state = JSON.parse(\n        localStorage.getItem(`${this.props.match.params.movieId}`)\n      );\n      this.setState({ ...state });\n    } else {\n      this.setState({ loading: true });\n      // fetch movie\n      const endpoint = `${API_URL}movie/${this.props.match.params.movieId}?api_key=${API_KEY}&language=en-US`;\n      this.fetchItems(endpoint);\n    }\n  }\n\n  fetchItems = endpoint => {\n    fetch(endpoint)\n      .then(res => res.json())\n      .then(res => {\n        console.log(res);\n        if (res.status_code) {\n          this.setState({ loading: false });\n        } else {\n          this.setState({ movie: res }, () => {\n            // fetch actors in setState callback function\n            const endpoint = `${API_URL}movie/${this.props.match.params.movieId}/credits?api_key=${API_KEY}`;\n            fetch(endpoint)\n              .then(res => res.json())\n              .then(res => {\n                console.log(res);\n                const directors = res.crew.filter(\n                  member => member.job === \"Director\"\n                );\n                this.setState(\n                  {\n                    actors: res.cast,\n                    directors,\n                    loading: false\n                  },\n                  () => {\n                    localStorage.setItem(\n                      `${this.props.match.params.movieId}`,\n                      JSON.stringify(this.state)\n                    );\n                  }\n                );\n              });\n          });\n        }\n      })\n      .catch(err => console.log(err));\n  };\n\n  render() {\n    return (\n      <div className=\"rmdb-movie\">\n        {this.state.movie ? (\n          <div>\n            <Navigation movie={this.props.location.movieName} />\n            <MovieInfo\n              movie={this.state.movie}\n              directors={this.state.directors}\n            />\n            <MovieInfoBar\n              time={this.state.runtime}\n              budget={this.state.movie.budget}\n              revenue={this.state.movie.revenue}\n            />\n          </div>\n        ) : null}\n\n        {this.state.actors ? (\n          <div className=\"rmdb-movie-grid\">\n            <FourColdGrid header={\"Actors\"}>\n              {this.state.actors.map((element, i) => {\n                return <Actor key={i} actor={element} />;\n              })}\n            </FourColdGrid>\n          </div>\n        ) : null}\n        {!this.state.actors && !this.state.loading ? (\n          <h1>No Movie Found</h1>\n        ) : null}\n        {this.state.loading ? <Spinner /> : null}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}