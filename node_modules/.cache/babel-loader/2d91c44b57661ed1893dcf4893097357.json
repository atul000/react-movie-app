{"ast":null,"code":"import _objectSpread from\"/Users/atul/Desktop/movie-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/Users/atul/Desktop/movie-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/atul/Desktop/movie-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/atul/Desktop/movie-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/atul/Desktop/movie-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/atul/Desktop/movie-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/atul/Desktop/movie-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{API_URL,API_KEY,IMAGE_BASE_URL,BACKDROP_SIZE,POSTER_SIZE}from\"../../config\";import HeroImage from\"../elements/HeroImage/HeroImage\";import SearchBar from\"../elements/SearchBar/SearchBar\";import FourColGrid from\"../elements/FourColGrid/FourColGrid\";import MovieThumb from\"../elements/MovieThumb/MovieThumb\";import LoadMoreBtn from\"../elements/LoadMoreBtn/LoadMoreBtn\";import Spinner from\"../elements/Spinner/Spinner\";import\"./Home.css\";var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);function Home(){var _getPrototypeOf2;var _this;_classCallCheck(this,Home);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Home)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={movies:[],heroImage:null,loading:false,currentPage:0,totalPages:0,searchTerm:\"\"};_this.searchItems=function(searchTerm){console.log(searchTerm);var endpoint=\"\";_this.setState({movies:[],loading:true,searchTerm:searchTerm});if(searchTerm===\"\"){endpoint=\"\".concat(API_URL,\"movie/popular?api_key=\").concat(API_KEY,\"&language=en-US&page=1\");}else{endpoint=\"\".concat(API_URL,\"search/movie?api_key=\").concat(API_KEY,\"&language=en-US&query=\").concat(searchTerm);}_this.fetchItems(endpoint);};_this.loadMoreItems=function(){var endpoint=\"\";_this.setState({loading:true});if(_this.state.searchTerm===\"\"){endpoint=\"\".concat(API_URL,\"movie/popular?api_key=\").concat(API_KEY,\"&language=en-US&page=\").concat(_this.state.currentPage+1);}else{endpoint=\"\".concat(API_URL,\"search/movie?api_key=\").concat(API_KEY,\"&language=en-US&query=\").concat(_this.state.searchTerm,\"&page=\").concat(_this.state.currentPage+1);}_this.fetchItems(endpoint);};_this.fetchItems=function(endpoint){fetch(endpoint).then(function(result){return result.json();}).then(function(result){console.log(result);_this.setState({movies:[].concat(_toConsumableArray(_this.state.movies),_toConsumableArray(result.results)),heroImage:_this.state.heroImage||result.results[0],loading:false,currentPage:result.page,totalPages:result.total_pages},function(){if(_this.state.searchTerm===\"\"){localStorage.setItem(\"HomeState\",JSON.stringify(_this.state));}});}).catch(function(error){return console.error(\"Error:\",error);});};return _this;}_createClass(Home,[{key:\"componentDidMount\",value:function componentDidMount(){if(localStorage.getItem(\"HomeState\")){var state=JSON.parse(localStorage.getItem(\"HomeState\"));this.setState(_objectSpread({},state));}else{this.setState({loading:true});var endpoint=\"\".concat(API_URL,\"movie/popular?api_key=\").concat(API_KEY,\"&language=en-US&page=1\");this.fetchItems(endpoint);}}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"rmdb-home\"},this.state.heroImage?React.createElement(\"div\",null,React.createElement(HeroImage,{image:\"\".concat(IMAGE_BASE_URL).concat(BACKDROP_SIZE).concat(this.state.heroImage.backdrop_path),title:this.state.heroImage.original_title,text:this.state.heroImage.overview}),React.createElement(SearchBar,{callback:this.searchItems})):null,React.createElement(\"div\",{className:\"rmdb-home-grid\"},React.createElement(FourColGrid,{header:this.state.searchTerm?\"Search Result\":\"Popular Movies\",loading:this.state.loading},this.state.movies.map(function(element,i){return React.createElement(MovieThumb,{key:i,clickable:true,image:element.poster_path?\"\".concat(IMAGE_BASE_URL).concat(POSTER_SIZE).concat(element.poster_path):\"./images/no_image.jpg\",movieId:element.id,movieName:element.original_title});})),this.state.loading?React.createElement(Spinner,null):null,this.state.currentPage<=this.state.totalPages&&!this.state.loading?React.createElement(LoadMoreBtn,{text:\"Load More\",onClick:this.loadMoreItems}):null));}}]);return Home;}(Component);export default Home;","map":{"version":3,"sources":["/Users/atul/Desktop/movie-app/src/components/Home/Home.js"],"names":["React","Component","API_URL","API_KEY","IMAGE_BASE_URL","BACKDROP_SIZE","POSTER_SIZE","HeroImage","SearchBar","FourColGrid","MovieThumb","LoadMoreBtn","Spinner","Home","state","movies","heroImage","loading","currentPage","totalPages","searchTerm","searchItems","console","log","endpoint","setState","fetchItems","loadMoreItems","fetch","then","result","json","results","page","total_pages","localStorage","setItem","JSON","stringify","catch","error","getItem","parse","backdrop_path","original_title","overview","map","element","i","poster_path","id"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  API_URL,\n  API_KEY,\n  IMAGE_BASE_URL,\n  BACKDROP_SIZE,\n  POSTER_SIZE\n} from \"../../config\";\nimport HeroImage from \"../elements/HeroImage/HeroImage\";\nimport SearchBar from \"../elements/SearchBar/SearchBar\";\nimport FourColGrid from \"../elements/FourColGrid/FourColGrid\";\nimport MovieThumb from \"../elements/MovieThumb/MovieThumb\";\nimport LoadMoreBtn from \"../elements/LoadMoreBtn/LoadMoreBtn\";\nimport Spinner from \"../elements/Spinner/Spinner\";\nimport \"./Home.css\";\n\nclass Home extends Component {\n  state = {\n    movies: [],\n    heroImage: null,\n    loading: false,\n    currentPage: 0,\n    totalPages: 0,\n    searchTerm: \"\"\n  };\n\n  componentDidMount() {\n    if (localStorage.getItem(\"HomeState\")) {\n      const state = JSON.parse(localStorage.getItem(\"HomeState\"));\n      this.setState({ ...state });\n    } else {\n      this.setState({ loading: true });\n      const endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=1`;\n      this.fetchItems(endpoint);\n    }\n  }\n\n  searchItems = searchTerm => {\n    console.log(searchTerm);\n    let endpoint = \"\";\n    this.setState({\n      movies: [],\n      loading: true,\n      searchTerm: searchTerm\n    });\n    if (searchTerm === \"\") {\n      endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=1`;\n    } else {\n      endpoint = `${API_URL}search/movie?api_key=${API_KEY}&language=en-US&query=${searchTerm}`;\n    }\n    this.fetchItems(endpoint);\n  };\n\n  loadMoreItems = () => {\n    let endpoint = \"\";\n    this.setState({ loading: true });\n\n    if (this.state.searchTerm === \"\") {\n      endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=${this\n        .state.currentPage + 1}`;\n    } else {\n      endpoint = `${API_URL}search/movie?api_key=${API_KEY}&language=en-US&query=${\n        this.state.searchTerm\n      }&page=${this.state.currentPage + 1}`;\n    }\n    this.fetchItems(endpoint);\n  };\n\n  fetchItems = endpoint => {\n    fetch(endpoint)\n      .then(result => result.json())\n      .then(result => {\n        console.log(result);\n        this.setState(\n          {\n            movies: [...this.state.movies, ...result.results],\n            heroImage: this.state.heroImage || result.results[0],\n            loading: false,\n            currentPage: result.page,\n            totalPages: result.total_pages\n          },\n          () => {\n            if (this.state.searchTerm === \"\") {\n              localStorage.setItem(\"HomeState\", JSON.stringify(this.state));\n            }\n          }\n        );\n      })\n      .catch(error => console.error(\"Error:\", error));\n  };\n\n  render() {\n    return (\n      <div className=\"rmdb-home\">\n        {this.state.heroImage ? (\n          <div>\n            <HeroImage\n              image={`${IMAGE_BASE_URL}${BACKDROP_SIZE}${this.state.heroImage.backdrop_path}`}\n              title={this.state.heroImage.original_title}\n              text={this.state.heroImage.overview}\n            />\n            <SearchBar callback={this.searchItems} />\n          </div>\n        ) : null}\n\n        <div className=\"rmdb-home-grid\">\n          <FourColGrid\n            header={this.state.searchTerm ? \"Search Result\" : \"Popular Movies\"}\n            loading={this.state.loading}\n          >\n            {this.state.movies.map((element, i) => {\n              return (\n                <MovieThumb\n                  key={i}\n                  clickable={true}\n                  image={\n                    element.poster_path\n                      ? `${IMAGE_BASE_URL}${POSTER_SIZE}${element.poster_path}`\n                      : \"./images/no_image.jpg\"\n                  }\n                  movieId={element.id}\n                  movieName={element.original_title}\n                />\n              );\n            })}\n          </FourColGrid>\n          {this.state.loading ? <Spinner /> : null}\n          {this.state.currentPage <= this.state.totalPages &&\n          !this.state.loading ? (\n            <LoadMoreBtn text=\"Load More\" onClick={this.loadMoreItems} />\n          ) : null}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}